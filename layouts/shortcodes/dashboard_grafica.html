<div style="width: 100%; max-width: 450px; margin: 20px auto;">
    <canvas id="ventasChart"></canvas>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    fetch('/data/pie_chart.json')
    .then(res => res.json())
    .then(data => {
        const ctx = document.getElementById('ventasChart').getContext('2d');
        new Chart(ctx, {
            type: 'pie',
            data: {
                labels: data.map(d => d.Familia),
                datasets: [{
                    data: data.map(d => d.Precio),
                    backgroundColor: ['#FF6384', '#36A2EB', '#FFCE56', '#4BC0C0', '#9966FF', '#FF9F40']
                }]
            },
            options: {
                plugins: {
                    tooltip: {
                        callbacks: {
                            label: function(tooltipItem) {
                                let sum = 0;
                                data.map(d => sum += d.Precio);
                                let percentage = (tooltipItem.raw * 100 / sum).toFixed(2) + "%";
                                return `${tooltipItem.label}: $${tooltipItem.raw} (${percentage})`;
                            }
                        }
                    }
                }
            }
        });
    });
</script>